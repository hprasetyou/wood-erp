<?xml version="1.0" encoding="utf-8"?>
<database name="default" defaultIdMethod="native" defaultPhpNamingMethod="underscore">
  <table name="component" idMethod="native" phpName="Component">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255" required="true"/>
    <column name="description" phpName="Description" type="LONGVARCHAR"/>
    <column name="material" phpName="Material" type="VARCHAR" size="255" />
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="finishing" idMethod="native" phpName="Finishing">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255" required="true"/>
    <column name="description" phpName="Description" type="LONGVARCHAR"/>
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="partner" idMethod="native" phpName="Partner">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255" required="true"/>
    <column name="email" phpName="Email" type="VARCHAR" size="255"/>
    <column name="address" phpName="Address" type="LONGVARCHAR"/>
    <column name="phone" phpName="Phone" type="VARCHAR" size="255"/>
    <column name="website" phpName="Website" type="VARCHAR" size="255"/>
    <column name="fax" phpName="Fax" type="VARCHAR" size="255"/>
    <column name="image" phpName="Image" type="LONGVARCHAR"/>
    <column name="tax_number" phpName="TaxNumber" type="VARCHAR" size="255"/>
    <column name="bank_detail" phpName="BankDetail" type="VARCHAR" size="255"/>
    <column name="company_id" phpName="CompanyId" type="INTEGER"/>
    <column name="is_employee" phpName="IsEmployee" type="BOOLEAN" size="1" required="true" defaultValue="false"/>
    <column name="is_customer" phpName="IsCustomer" type="BOOLEAN" size="1" required="true" defaultValue="false"/>
    <column name="is_supplier" phpName="IsSupplier" type="BOOLEAN" size="1" required="true" defaultValue="false"/>
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <index name="company_id">
      <index-column name="company_id"/>
    </index>
    <foreign-key foreignTable="partner" phpName="Company" phpRefName="CompanyMember" skipSql="true" name="product_company_ibfk_2">
      <reference local="company_id" foreign="id"/>
    </foreign-key>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="product" idMethod="native" phpName="Product">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255" required="true"/>
    <column name="description" phpName="Description" type="VARCHAR" size="255"/>
    <column name="is_round" phpName="IsRound" type="BOOLEAN" size="1" required="true" defaultValue="false"/>
    <column name="is_kdn" phpName="IsKdn" type="BOOLEAN" size="1" required="true" defaultValue="false"/>
    <column name="is_flegt" phpName="IsFlegt" type="BOOLEAN" size="1" required="true" defaultValue="false"/>
    <column name="has_component" phpName="HasComponent" type="BOOLEAN" size="1" defaultValue="false"/>
    <column name="qty_per_pack" phpName="QtyPerPack" type="INTEGER" required="true" defaultValue="1"/>
    <column name="cost_price" phpName="CostPrice" type="FLOAT" required="true"/>
    <column name="list_price" phpName="ListPrice" type="FLOAT" required="true"/>
    <column name="note" phpName="Note" type="LONGVARCHAR"/>
    <column name="cubic_asb" phpName="CubicAsb" type="FLOAT" required="true"/>
    <column name="cubic_kdn" phpName="CubicKdn" type="FLOAT" required="true"/>
    <column name="width_asb" phpName="WidthAsb" type="FLOAT" required="true"/>
    <column name="height_asb" phpName="HeightAsb" type="FLOAT" required="true"/>
    <column name="depth_asb" phpName="DepthAsb" type="FLOAT" required="true"/>
    <column name="width_kdn" phpName="WidthKdn" type="FLOAT"/>
    <column name="height_kdn" phpName="HeightKdn" type="FLOAT"/>
    <column name="depth_kdn" phpName="DepthKdn" type="FLOAT"/>
    <column name="net_cubic" phpName="NetCubic" type="FLOAT"/>
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="product_component" idMethod="native" phpName="ProductComponent">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="product_id" phpName="ProductId" type="INTEGER" required="true"/>
    <column name="component_id" phpName="ComponentId" type="INTEGER" required="true"/>
    <column name="qty" phpName="Qty" type="INTEGER" required="true"/>
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <foreign-key foreignTable="product" name="product_component_ibfk_1">
      <reference local="product_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="component" name="product_component_ibfk_2">
      <reference local="component_id" foreign="id"/>
    </foreign-key>
    <index name="product_id">
      <index-column name="product_id"/>
    </index>
    <index name="component_id">
      <index-column name="component_id"/>
    </index>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <!--
  Product price here was to identify, wether this customer reorder this product
  again we can use "their special" price for them
 -->
  <table name="product_customer" idMethod="native" phpName="ProductCustomer">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255"/>
    <column name="partner_id" phpName="PartnerId" type="INTEGER" required="true"/>
    <column name="product_id" phpName="ProductId" type="INTEGER" required="true"/>
    <column name="product_price" phpName="ProductPrice" type="INTEGER" required="true"/>
    <column name="description" phpName="Description" type="LONGVARCHAR"/>
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <foreign-key foreignTable="partner" name="product_partner_ibfk_1">
      <reference local="partner_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="product" name="product_partner_ibfk_2">
      <reference local="product_id" foreign="id"/>
    </foreign-key>
    <index name="partner_id">
      <index-column name="partner_id"/>
    </index>
    <index name="product_id">
      <index-column name="product_id"/>
    </index>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="product_finishing" idMethod="native" isCrossRef="true" phpName="ProductFinishing">
    <column name="product_id" phpName="ProductId" type="INTEGER" primaryKey="true" required="true"/>
    <column name="finishing_id" phpName="FinishingId" type="INTEGER" primaryKey="true" required="true"/>
    <foreign-key foreignTable="product" name="product_finishing_ibfk_1">
      <reference local="product_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="finishing" name="product_finishing_ibfk_2">
      <reference local="finishing_id" foreign="id"/>
    </foreign-key>
    <index name="product_id">
      <index-column name="product_id"/>
    </index>
    <index name="finishing_id">
      <index-column name="finishing_id"/>
    </index>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="user" idMethod="native" phpName="User">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255" required="true"/>
    <column name="password" phpName="Password" type="VARCHAR" size="255"/>
    <column name="partner_id" phpName="PartnerId" type="INTEGER" required="true"/>
    <column name="last_login" phpName="LastLogin" type="TIMESTAMP"/>
    <column name="status" phpName="Status" type="BOOLEAN" defaultValue="false" required="true"/>
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <foreign-key foreignTable="partner" phpName="Partner">
      <reference local="partner_id" foreign="id"/>
    </foreign-key>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="ugroup" idMethod="native" phpName="Group">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255" required="true"/>
    <column name="description" phpName="Description" type="LONGVARCHAR" />
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="user_group" isCrossRef="true">
    <column name="user_id" phpName="UserId" type="integer" primaryKey="true"/>
    <column name="group_id" phpName="GroupId" type="integer" primaryKey="true"/>
    <foreign-key foreignTable="user">
      <reference local="user_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="ugroup" phpName="Group">
      <reference local="group_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="menu_group" isCrossRef="true">
    <column name="menu_id" phpName="MenuId" type="integer" primaryKey="true"/>
    <column name="group_id" phpName="GroupId" type="integer" primaryKey="true"/>
    <foreign-key foreignTable="menu">
      <reference local="menu_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="ugroup" phpName="Group">
      <reference local="group_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="menu" idMethod="native" phpName="Menu">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255" required="true"/>
    <column name="url" phpName="Url" type="VARCHAR" size="255" required="true"/>
    <column name="icon" phpName="Icon" type="VARCHAR" size="255" required="true"/>
    <column name="controller" phpName="Controller" type="VARCHAR" size="255" required="true"/>
    <column name="parent_id" phpName="ParentId" type="INTEGER"/>
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <foreign-key foreignTable="menu" phpName="Parent" phpRefName="Child" skipSql="true">
      <reference local="parent_id" foreign="id"/>
    </foreign-key>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="activity" idMethod="native" phpName="Activity">
    <column name="uuid" phpName="Uuid" type="VARCHAR" size="255" primaryKey="true" required="true"/>
    <column name="user_id" phpName="UserId" type="INTEGER" required="true"/>
    <column name="object" phpName="Object" type="VARCHAR" size="255" required="true"/>
    <column name="object_id" phpName="ObjectId" type="INTEGER" required="true"/>
    <column name="description" phpName="Description" type="LONGVARCHAR" />
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <foreign-key foreignTable="user">
      <reference local="user_id" foreign="id"/>
    </foreign-key>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="product_image" phpName="ProductImage">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255"/>
    <column name="url" phpName="Url" type="LONGVARCHAR"/>
    <column name="description" phpName="Description" type="LONGVARCHAR"/>
    <column name="product_id" phpName="ProductId" type="INTEGER" required="true"/>
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <foreign-key foreignTable="product">
      <reference local="product_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="proforma_invoice" phpName="ProformaInvoice">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255"/>
    <column name="customer_id" phpName="CustomerId" type="INTEGER" required="true"/>
    <column name="date" phpName="Date" type="DATE"/>
    <column name="description" phpName="Description" size="255" type="VARCHAR"/>
    <column name="state" phpName="State" type="CHAR" sqlType="ENUM('draft','confirm')" defaultValue="draft"/>
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <foreign-key foreignTable="partner">
      <reference local="customer_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="proforma_invoice_line" phpName="ProformaInvoiceLine">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="proforma_invoice_id" phpName="ProformaInvoiceId" type="INTEGER" required="true"/>
    <column name="product_customer_id" phpName="ProductCustomerId" type="INTEGER" required="true"/>
    <column name="product_finishing" phpName="ProductFinishing" size="255" type="VARCHAR"/>
    <column name="description" phpName="Description" size="255" type="VARCHAR"/>
    <column name="qty" phpName="Qty" type="INTEGER"/>
    <column name="qty_per_pack" phpName="QtyPerPack" type="INTEGER"/>
    <column name="cubic_dimension" phpName="CubicDimension" type="FLOAT"/>
    <column name="total_cubic_dimension" phpName="TotalCubicDimension" type="FLOAT"/>
    <column name="price" phpName="Price" type="FLOAT"/>
    <column name="total_price" phpName="TotalPrice" type="FLOAT"/>
    <column name="is_sample" phpName="IsSample" type="BOOLEAN" size="1" required="true" defaultValue="false"/>
    <column name="is_need_box" phpName="IsNeedBox" type="BOOLEAN" size="1" required="true" defaultValue="false"/>
    <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
    <column name="updated_at" phpName="UpdatedAt" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" required="true"/>
    <foreign-key foreignTable="proforma_invoice">
      <reference local="proforma_invoice_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="product_customer">
      <reference local="product_customer_id" foreign="id"/>
    </foreign-key>
  </table>

</database>
